# Docusaurus Autogenerated Sidebars - Migration Guide

## The Problem
Your current setup manually lists every single file in `sidebars.ts`, which causes:
- Crashes when files are missing
- Manual maintenance every time you add/remove files
- Inconvenient content management workflow

## The Solution: Autogenerated Sidebars

### Step 1: Replace sidebars.ts with autogenerated version

```typescript
// sidebars.ts
import type {SidebarsConfig} from '@docusaurus/plugin-content-docs';

const sidebars: SidebarsConfig = {
  homeSidebar: [
    {
      type: 'category',
      label: 'Home',
      link: { type: 'doc', id: 'home/index' },
      items: [{ type: 'autogenerated', dirName: 'home' }],
    },
  ],
  
  guidelinesSidebar: [
    {
      type: 'category', 
      label: 'Guidelines',
      link: { type: 'doc', id: 'guidelines/index' },
      items: [{ type: 'autogenerated', dirName: 'guidelines' }],
    },
  ],
  
  componentsSidebar: [
    {
      type: 'category',
      label: 'Components', 
      link: { type: 'doc', id: 'components/index' },
      items: [{ type: 'autogenerated', dirName: 'components' }],
    },
  ],
  
  patternsSidebar: [
    {
      type: 'category',
      label: 'Patterns',
      link: { type: 'doc', id: 'patterns/index' },
      items: [{ type: 'autogenerated', dirName: 'patterns' }],
    },
  ],
  
  designSidebar: [
    {
      type: 'category',
      label: 'Design',
      link: { type: 'doc', id: 'design/index' },
      items: [{ type: 'autogenerated', dirName: 'design' }],
    },
  ],
  
  dsSidebar: [
    {
      type: 'category',
      label: 'DS',
      link: { type: 'doc', id: 'ds/index' },
      items: [{ type: 'autogenerated', dirName: 'ds' }],
    },
  ],
};

export default sidebars;
```

### Step 2: Control order and labels with frontmatter

In your .md/.mdx files, use frontmatter to control sidebar behavior:

```markdown
---
title: Button Component
sidebar_label: Button  # Custom sidebar label
sidebar_position: 1    # Controls order (lower = earlier)
---

# Button Component
Your content here...
```

### Step 3: Use _category_.yml for directory metadata (optional)

Create `docs/patterns/_category_.yml`:
```yaml
label: Patterns
position: 4
collapsible: true
collapsed: false
link:
  type: doc
  id: patterns/index
```

## Benefits of Autogeneration

### ‚úÖ What you GET:
1. **Add files freely** - Just create new .md/.mdx files and they appear automatically
2. **Remove files safely** - Delete files without crashes or manual cleanup
3. **Zero maintenance** - No more updating sidebars.ts manually  
4. **Graceful handling** - Missing files don't break the build
5. **Intelligent sorting** - Index files first, then alphabetical order
6. **Custom labels** - Use `sidebar_label` to customize names

### üéØ Smart Sorting Behavior:
Our custom sidebar generator provides intelligent sorting:
1. **Index files first** - `index.mdx`, `index.md`, `index.tsx`, `index.ts`, `index.js` (in that order)
2. **Alphabetical sorting** - All other files sorted alphabetically by label
3. **No configuration needed** - Works automatically for all directories

### ‚ö†Ô∏è What you LOSE:
1. **Explicit control** - Less granular control over exact sidebar structure
2. **Complex nesting** - Harder to create deeply nested custom structures

## Migration Steps

1. **Backup current sidebars.ts**
   ```bash
   cp sidebars.ts sidebars-backup.ts
   ```

2. **Replace with autogenerated version**
   ```bash
   cp sidebars-autogen.ts sidebars.ts
   ```

3. **Test the build**
   ```bash
   npm start
   ```

4. **Add frontmatter to control ordering** (if needed)
   ```markdown
   ---
   sidebar_position: 1
   sidebar_label: Overview  
   ---
   ```

## Advanced: Hybrid Approach

You can mix autogenerated with manual sections:

```typescript
patternsSidebar: [
  {
    type: 'category',
    label: 'Patterns',
    link: { type: 'doc', id: 'patterns/index' },
    items: [
      'patterns/index',  // Manual overview
      {
        type: 'category',
        label: 'Layout Patterns',
        items: [{ type: 'autogenerated', dirName: 'patterns/layout' }]
      },
      {
        type: 'category', 
        label: 'Navigation Patterns',
        items: [{ type: 'autogenerated', dirName: 'patterns/navigation' }]
      }
    ],
  },
]
```

## Best Practices

1. **Use sidebar_position consistently** - Start from 1, increment by 1 or 10
2. **Keep index files as position 1** - Overview/index should always be first
3. **Use descriptive sidebar_label** - Override filename-based labels when needed
4. **Group related content** - Use subdirectories for logical grouping

## Troubleshooting

**Q: File order is wrong**
A: Add `sidebar_position` frontmatter to control order

**Q: Label is ugly** 
A: Add `sidebar_label` frontmatter to customize display name

**Q: Want to hide a file**
A: Add `sidebar_class_name: hidden` or move to subdirectory

**Q: Need custom structure**
A: Use hybrid approach mixing autogenerated with manual sections